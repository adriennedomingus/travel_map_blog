<div class="container-fluid" id="background">
  <div class="container blog-content">
    <h1 class="blog-title"><%= @blog.title %></h1>
    <% if @blog.trip %>
      <h3 class="blog-title">Trip: <%= link_to @blog.trip.name, "/trips/#{@blog.trip.slug}"%></h1>
    <% end %>
    <h4><%= @blog.formatted_date %></h4>
    <p class="posted-date">Posted on <%= @blog.posted_on %> by <%= link_to @blog.user.nickname, user_path(@blog.user.nickname) %> </p>
    <% if current_user && @blog.user_id == current_user.id %>
      <p class="centered"><%= link_to "Edit", edit_user_blog_path(current_user.nickname, @blog.slug) %></p>
      <p class="centered delete"><%= link_to "Delete", user_blog_path(@blog), method: :delete %></p>
    <% end %>
    <p><%= @blog.content.gsub(/\n/, '<br/>').html_safe %></p>
    <hr>
    <% if @blog.photos.count > 0 %>
      <h3 class="centered">Photos</h3>
    <% end %>
    <br>
    <% @blog.photos.each do |photo| %>
      <div class="col-md-4">
        <%= render partial: "partials/photo", locals: { photo: photo } %>
      </div>
    <% end %>
    <hr>
    <h3 class="centered">Comments (<%= @blog.comments.count %>)</h3>
    <br>
    <% @blog.comments.order(created_at: :desc).each do |comment| %>
      <p class= "post-title"><%= comment.user.nickname %> </p>
      <p class= "post-date"><%= comment.posted_on %></p>
      <p class="post-contents"><%= comment.body %></p>
      <hr>
    <% end %>
    <%= render partial: "partials/comment_form", locals: {commentable: @blog} %>
  </div>
</div>
